<!doctype html><html lang=en><head><meta charset=UTF-8><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content="Bui Huy Giap's personal website and blog" name=description><link rel="shortcut icon" href=/images/favicon.ico type=image/x-icon><title>
      
        
          I switched to Fish as my interactive shell | Zap's website
        
      
    </title><link href=/styles/fonts-critical.css rel=stylesheet><link href=/styles/fonts.css rel=stylesheet><style>h1{font-size:1.682rem}h2{font-size:1.414rem}h3{font-size:1.189rem}h4{font-size:1rem}h5{font-size:.841rem}h6{font-size:.707rem}</style><link href=/styles/base.css rel=stylesheet><link href=/styles/nav.css rel=stylesheet><link href=/styles/footer.css rel=stylesheet><link href=/rss.xml rel=alternate title=RSS type=application/rss+xml><link href=/styles/page.css rel=stylesheet><body><div class=nav__bg><div class=nav__container><nav class=nav><h3 class=nav__title><a class=nav__title__link href=/>Zap</a></h3><ul class=nav__links><li><a class=nav__link href=/works>Works</a><li><a class=nav__link href=/blog>Blog</a><li><a class=nav__link href=/about>About</a></ul></nav></div></div><div class=container><main class=content><header class=post-header><h1 class="post-header__title title">I switched to Fish as my interactive shell</h1><div class=post-header__meta><div class=post-header__data><svg viewbox="0 0 448 512" height=1em xmlns=http://www.w3.org/2000/svg><path d="M128 0c17.7 0 32 14.3 32 32V64H288V32c0-17.7 14.3-32 32-32s32 14.3 32 32V64h48c26.5 0 48 21.5 48 48v48H0V112C0 85.5 21.5 64 48 64H96V32c0-17.7 14.3-32 32-32zM0 192H448V464c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V192zm64 80v32c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16V272c0-8.8-7.2-16-16-16H80c-8.8 0-16 7.2-16 16zm128 0v32c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16V272c0-8.8-7.2-16-16-16H208c-8.8 0-16 7.2-16 16zm144-16c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16V272c0-8.8-7.2-16-16-16H336zM64 400v32c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16V400c0-8.8-7.2-16-16-16H80c-8.8 0-16 7.2-16 16zm144-16c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16V400c0-8.8-7.2-16-16-16H208zm112 16v32c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16V400c0-8.8-7.2-16-16-16H336c-8.8 0-16 7.2-16 16z"/></svg> Tue, Oct 01 2024</div><div class=post-header__data><svg viewbox="0 0 512 512" height=1em xmlns=http://www.w3.org/2000/svg><path d="M256 0a256 256 0 1 1 0 512A256 256 0 1 1 256 0zM232 120V256c0 8 4 15.5 10.7 20l96 64c11 7.4 25.9 4.4 33.3-6.7s4.4-25.9-6.7-33.3L280 243.2V120c0-13.3-10.7-24-24-24s-24 10.7-24 24z"/></svg><abbr title="972 words"> 4 minutes read </abbr></div></div></header><article class=content__body><p>ZSH has been my shell of choice since I started my command-line-centric workflow. It’s a popular shell with a <a href=//github.com/zsh-users>large</a> <a href=//ohmyz.sh/>community</a> and an unprecedented level of customizability. ZSH is also POSIX-compliant, which was very important to me for some reason. However, after some reconsideration, I decided to port my config to the Fish shell, and this is why.</p><span id=continue-reading></span><h1 id=performance>Performance</h1><p>Performance is the price you have to pay for flexibility, and for a while it felt that the customizability and features of ZSH were worth it. But recently, I noticed that I frequently started typing before ZSH was fully loaded. I decided to benchmark the start-up time ZSH compared to 2 other shells, namely <a href=//fishshell.com/>Fish</a> and <a href=//www.nushell.sh/>Nu</a>. Because these shells are on par with my customized ZSH by default, it’s fair to compare them that way. Here is the result:<figure><img alt="ZSH vs Fish vs Nu benchmark" src=benchmark.png><figcaption>start-up time differences between ZSH, Fish and Nu shell</figcaption></figure><p>I’m surprised that Fish is almost 4 times faster than ZSH, and can start up (and exit) in less than 1/60 of a second, which is faster than the refresh rate of my monitor. This is a great result, while start-up time doesn’t accurately reflect the shell’s responsiveness during interactive usage, it is usually a good enough indicator. There have been many reasons for me to switch to Fish, which I will discuss below, but the performance benefit is the final nail in the ZSH coffin.<h1 id=fish-features>Fish features</h1><p>Out-of-the-box, Fish is already packed with many useful features, such as syntax highlighting, autosuggestions, and prompts with git integration. They worked so well that I didn’t have to install any extensions. Of course, ZSH has all these features, but they are not built-in, so they probably contributed to the performance difference we observed earlier.<p>Other than that, there are some features that feel “nicer” in Fish, such as vi mode and completion menus, and I consider good performance to be a feature in and of itself. Fish also has sensible defaults, which shrunk the size of my configuration file, and fewer configurations means less worrying about messing up somewhere.<h1 id=non-posix-compliant>Non POSIX-compliant</h1><p>Another selling point of Fish is its syntax, which took its own turn away from the POSIX standards. Although I find the syntax much nicer than POSIX- compliant shells, I won’t use it for anything other than writing my Fish config. If I care about portability, I’d use regular shell scripting. Otherwise, I’d use something like Python, Deno, or even Nu.<p>The non-compliancy extends beyond scripting and also affect interactive use. This, compared with the fact that you can get all of Fish’s features with a configured ZSH, is why I’ve been staying away from Fish. However, I’ve been adopting modern, non-standard alternatives, from programming style, paradigm, languages, to softwares that I use. I’m starting to see that while standards have their values, they are also limitations that sometimes you have to break free to reach new heights.<h1 id=drawbacks-of-using-fish>Drawbacks of using Fish</h1><p>Because Fish is not as configurable as ZSH, there are things that I’d like to change but are impossible to do. For example, I like autosuggestions, but don’t like using my history as a source, and there’s currently no option to configure that. I’m also used to being able to use vim keybindings on the tab completion menu, and there’s no way (that I know of) to enable it in Fish. However, I can work around these problems, and other Fish features make dealing with them worth it.<p>Being non-POSIX-compliant also means that you’re relying on shell-related applications to support Fish. For example, to activate Python virtual environments, I have to execute <code>{path-to-env}/bin/activate.Fish</code> instead of <code>{path-to-env}/bin/activate</code>. If the maintainer doesn’t care to maintain the Fish version of the script, I’m effectively on my own. There might be many other intricacies of using Fish instead of a POSIX-compliant shell, and so far I haven’t encountered any of them.<h1 id=what-about-nu>What about Nu</h1><p>Nu is another modern, non-standard shell, which offers a unique approach to working with your terminal. From my understanding, Nu adds data types to its language instead of just working with raw textual data. There are also pipelines, which enable powerful data manipulation. Its syntax and error messages also make scripting in it much better than other shells or even programming languages.<p>However, Nu is still changing quite often, so it’s probably not a good idea to use it as an interactive shell. While the structured data is good for manipulation, Nu failed to display it in a way that look as good as regular textual output, at least to me. Also, since most UNIX command-line tools operate on plain text, I doubt that Nu will work well in cases involving third-party tools.<p>I think that Fish is a better general-purpose, interactive shell. However, I’m still open to the idea of switching completely to Nu in the future. Until then, I still keep Nu around for data manipulation and scripting. Also, if I ever use Windows on any of my machine, I’ll use Nu as an interactive shell there. Nu is great, and I recommend everyone to <a href=//www.nushell.sh/>check it out</a>.<h1 id=final-thoughts>Final thoughts</h1><p>So after more than 2 years, I finally migrated from ZSH to Fish. I’m still amazed at how quickly my shell instances start up now. As of the time of writing, I’ve partly gotten used to Fish’s syntax differences in interactive use, and completely ported my old ZSH config. I’m enjoying the benefits of using Fish already, but only time will tell if Fish behaves well along the road.</article></main><footer class=footer__container><svg viewbox="0 352.5 960 188.5" class=footer__split preserveaspectratio=none version=1.1 xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink><path d="M0 441L22.8 424.5C45.7 408 91.3 375 137 360.8C182.7 346.7 228.3 351.3 274 369.3C319.7 387.3 365.3 418.7 411.2 414.2C457 409.7 503 369.3 548.8 368C594.7 366.7 640.3 404.3 686 421.7C731.7 439 777.3 436 823 429.8C868.7 423.7 914.3 414.3 937.2 409.7L960 405L960 541L937.2 541C914.3 541 868.7 541 823 541C777.3 541 731.7 541 686 541C640.3 541 594.7 541 548.8 541C503 541 457 541 411.2 541C365.3 541 319.7 541 274 541C228.3 541 182.7 541 137 541C91.3 541 45.7 541 22.8 541L0 541Z" fill=#f7f9fb /><path d="M0 477L22.8 467C45.7 457 91.3 437 137 423.8C182.7 410.7 228.3 404.3 274 401.7C319.7 399 365.3 400 411.2 413.5C457 427 503 453 548.8 464.2C594.7 475.3 640.3 471.7 686 456.5C731.7 441.3 777.3 414.7 823 404.5C868.7 394.3 914.3 400.7 937.2 403.8L960 407L960 541L937.2 541C914.3 541 868.7 541 823 541C777.3 541 731.7 541 686 541C640.3 541 594.7 541 548.8 541C503 541 457 541 411.2 541C365.3 541 319.7 541 274 541C228.3 541 182.7 541 137 541C91.3 541 45.7 541 22.8 541L0 541Z" fill=#eff3f7 /><path d="M0 459L22.8 456.2C45.7 453.3 91.3 447.7 137 456.7C182.7 465.7 228.3 489.3 274 494.8C319.7 500.3 365.3 487.7 411.2 476C457 464.3 503 453.7 548.8 451.7C594.7 449.7 640.3 456.3 686 462.5C731.7 468.7 777.3 474.3 823 473.2C868.7 472 914.3 464 937.2 460L960 456L960 541L937.2 541C914.3 541 868.7 541 823 541C777.3 541 731.7 541 686 541C640.3 541 594.7 541 548.8 541C503 541 457 541 411.2 541C365.3 541 319.7 541 274 541C228.3 541 182.7 541 137 541C91.3 541 45.7 541 22.8 541L0 541Z" fill=#e8eef4 stroke=#e8eef4 /></svg><div class=footer__bg><div class=footer>© 2024 Zap (Huy-Giap Bui). Content on this site is licensed under <a href=//creativecommons.org/licenses/by-sa/4.0/>CC BY-SA 4.0</a>.</div></div></footer></div>